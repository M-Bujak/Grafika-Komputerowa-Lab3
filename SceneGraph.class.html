<html>
<head>
<title>SceneGraph.class</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #808080;}
.s1 { color: #a9b7c6;}
.s2 { color: #cc7832;}
.s3 { color: #6897bb;}
.s4 { color: #6a8759;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
SceneGraph.class</font>
</center></td></tr></table>
<pre><span class="s0">//</span>
<span class="s0">// Source code recreated from a .class file by IntelliJ IDEA</span>
<span class="s0">// (powered by Fernflower decompiler)</span>
<span class="s0">//</span>

<span class="s2">package </span><span class="s1">com.company</span><span class="s2">;</span>

<span class="s2">import </span><span class="s1">java.awt.BasicStroke</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">java.awt.BorderLayout</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">java.awt.Color</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">java.awt.Dimension</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">java.awt.Graphics</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">java.awt.Graphics2D</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">java.awt.RenderingHints</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">java.awt.event.ActionEvent</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">java.awt.event.ActionListener</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">java.awt.geom.AffineTransform</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">java.awt.geom.Path2D</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">java.awt.geom.Line2D.Double</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">java.util.ArrayList</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">java.util.Iterator</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">javax.swing.BorderFactory</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">javax.swing.JCheckBox</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">javax.swing.JFrame</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">javax.swing.JPanel</span><span class="s2">;</span>
<span class="s2">import </span><span class="s1">javax.swing.Timer</span><span class="s2">;</span>

<span class="s2">public class </span><span class="s1">SceneGraph </span><span class="s2">extends </span><span class="s1">JPanel {</span>
    <span class="s2">private static final int </span><span class="s1">WIDTH = </span><span class="s3">800</span><span class="s2">;</span>
    <span class="s2">private static final int </span><span class="s1">HEIGHT = </span><span class="s3">600</span><span class="s2">;</span>
    <span class="s2">private static final double </span><span class="s1">X_LEFT = -</span><span class="s3">4.0D</span><span class="s2">;</span>
    <span class="s2">private static final double </span><span class="s1">X_RIGHT = </span><span class="s3">4.0D</span><span class="s2">;</span>
    <span class="s2">private static final double </span><span class="s1">Y_BOTTOM = -</span><span class="s3">3.0D</span><span class="s2">;</span>
    <span class="s2">private static final double </span><span class="s1">Y_TOP = </span><span class="s3">3.0D</span><span class="s2">;</span>
    <span class="s2">private static final </span><span class="s1">Color BACKGROUND</span><span class="s2">;</span>
    <span class="s2">private float </span><span class="s1">pixelSize</span><span class="s2">;</span>
    <span class="s2">private int </span><span class="s1">frameNumber = </span><span class="s3">0</span><span class="s2">;</span>
    <span class="s2">private </span><span class="s1">SceneGraph.CompoundObject world</span><span class="s2">;</span>
    <span class="s2">private </span><span class="s1">SceneGraph.TransformedObject rotatingRect</span><span class="s2">;</span>
    <span class="s2">public </span><span class="s1">SceneGraph.TransformedObject wh11</span><span class="s2">;</span>
    <span class="s2">public </span><span class="s1">SceneGraph.TransformedObject wh12</span><span class="s2">;</span>
    <span class="s2">public </span><span class="s1">SceneGraph.TransformedObject wh21</span><span class="s2">;</span>
    <span class="s2">public </span><span class="s1">SceneGraph.TransformedObject wh22</span><span class="s2">;</span>
    <span class="s2">public </span><span class="s1">SceneGraph.TransformedObject wh31</span><span class="s2">;</span>
    <span class="s2">public </span><span class="s1">SceneGraph.TransformedObject wh32</span><span class="s2">;</span>
    <span class="s2">private static </span><span class="s1">SceneGraph.SceneGraphNode line</span><span class="s2">;</span>
    <span class="s2">private static </span><span class="s1">SceneGraph.SceneGraphNode rect</span><span class="s2">;</span>
    <span class="s2">private static </span><span class="s1">SceneGraph.SceneGraphNode filledRect</span><span class="s2">;</span>
    <span class="s2">private static </span><span class="s1">SceneGraph.SceneGraphNode circle</span><span class="s2">;</span>
    <span class="s2">private static </span><span class="s1">SceneGraph.SceneGraphNode filledCircle</span><span class="s2">;</span>
    <span class="s2">private static </span><span class="s1">SceneGraph.SceneGraphNode filledTriangle</span><span class="s2">;</span>
    <span class="s2">private static </span><span class="s1">SceneGraph.SceneGraphNode filledPolygon</span><span class="s2">;</span>
    <span class="s2">private </span><span class="s1">JPanel display = </span><span class="s2">new </span><span class="s1">JPanel() {</span>
        <span class="s2">protected void </span><span class="s1">paintComponent(Graphics g) {</span>
            <span class="s2">super</span><span class="s1">.paintComponent(g)</span><span class="s2">;</span>
            <span class="s1">Graphics2D g2 = (Graphics2D)g.create()</span><span class="s2">;</span>
            <span class="s1">g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING</span><span class="s2">, </span><span class="s1">RenderingHints.VALUE_ANTIALIAS_ON)</span><span class="s2">;</span>
            <span class="s1">SceneGraph.</span><span class="s2">this</span><span class="s1">.applyLimits(g2</span><span class="s2">, </span><span class="s1">-</span><span class="s3">4.0D</span><span class="s2">, </span><span class="s3">4.0D</span><span class="s2">, </span><span class="s3">3.0D</span><span class="s2">, </span><span class="s1">-</span><span class="s3">3.0D</span><span class="s2">, false</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s1">g2.setStroke(</span><span class="s2">new </span><span class="s1">BasicStroke(SceneGraph.</span><span class="s2">this</span><span class="s1">.pixelSize))</span><span class="s2">;</span>
            <span class="s1">SceneGraph.</span><span class="s2">this</span><span class="s1">.world.draw(g2)</span><span class="s2">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span><span class="s2">;</span>

    <span class="s2">public static void </span><span class="s1">main(String[] args) {</span>
        <span class="s1">JFrame window = </span><span class="s2">new </span><span class="s1">JFrame(</span><span class="s4">&quot;Scene Graph 2D&quot;</span><span class="s1">)</span><span class="s2">;</span>
        <span class="s1">window.setContentPane(</span><span class="s2">new </span><span class="s1">SceneGraph())</span><span class="s2">;</span>
        <span class="s1">window.pack()</span><span class="s2">;</span>
        <span class="s1">window.setLocation(</span><span class="s3">100</span><span class="s2">, </span><span class="s3">60</span><span class="s1">)</span><span class="s2">;</span>
        <span class="s1">window.setResizable(</span><span class="s2">false</span><span class="s1">)</span><span class="s2">;</span>
        <span class="s1">window.setDefaultCloseOperation(</span><span class="s3">3</span><span class="s1">)</span><span class="s2">;</span>
        <span class="s1">window.setVisible(</span><span class="s2">true</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">private void </span><span class="s1">createWorld() {</span>
        <span class="s2">this</span><span class="s1">.world = </span><span class="s2">new </span><span class="s1">SceneGraph.CompoundObject()</span><span class="s2">;</span>
        <span class="s2">this</span><span class="s1">.wh11 = (SceneGraph.TransformedObject)(</span><span class="s2">new </span><span class="s1">SceneGraph.TransformedObject(filledPolygon)).setTranslation(-</span><span class="s3">1.0D</span><span class="s2">, </span><span class="s3">0.1D</span><span class="s1">).setScale(</span><span class="s3">0.005D</span><span class="s2">, </span><span class="s3">0.005D</span><span class="s1">).setColor(Color.BLACK)</span><span class="s2">;</span>
        <span class="s2">this</span><span class="s1">.wh12 = (SceneGraph.TransformedObject)(</span><span class="s2">new </span><span class="s1">SceneGraph.TransformedObject(filledPolygon)).setTranslation(</span><span class="s3">1.0D</span><span class="s2">, </span><span class="s1">-</span><span class="s3">0.1D</span><span class="s1">).setScale(</span><span class="s3">0.005D</span><span class="s2">, </span><span class="s3">0.005D</span><span class="s1">).setColor(Color.BLACK)</span><span class="s2">;</span>
        <span class="s1">SceneGraph.CompoundObject Swing1 = </span><span class="s2">new </span><span class="s1">SceneGraph.CompoundObject()</span><span class="s2">;</span>
        <span class="s1">Swing1.add((</span><span class="s2">new </span><span class="s1">SceneGraph.TransformedObject(filledTriangle)).setTranslation(</span><span class="s3">0.0D</span><span class="s2">, </span><span class="s1">-</span><span class="s3">1.0D</span><span class="s1">).setScale(</span><span class="s3">0.5D</span><span class="s2">, </span><span class="s3">1.0D</span><span class="s1">).setColor(Color.BLUE))</span><span class="s2">;</span>
        <span class="s1">Swing1.add(</span><span class="s2">this</span><span class="s1">.wh11)</span><span class="s2">;</span>
        <span class="s1">Swing1.add(</span><span class="s2">this</span><span class="s1">.wh12)</span><span class="s2">;</span>
        <span class="s1">Swing1.add((</span><span class="s2">new </span><span class="s1">SceneGraph.TransformedObject(filledRect)).setScale(</span><span class="s3">0.125D</span><span class="s2">, </span><span class="s3">2.0D</span><span class="s1">).setRotation(</span><span class="s3">85.0D</span><span class="s1">).setColor(Color.RED))</span><span class="s2">;</span>
        <span class="s2">this</span><span class="s1">.world.add(Swing1)</span><span class="s2">;</span>
        <span class="s2">this</span><span class="s1">.wh21 = (SceneGraph.TransformedObject)(</span><span class="s2">new </span><span class="s1">SceneGraph.TransformedObject(filledPolygon)).setTranslation(-</span><span class="s3">3.0D</span><span class="s2">, </span><span class="s3">1.6D</span><span class="s1">).setScale(</span><span class="s3">0.005D</span><span class="s2">, </span><span class="s3">0.005D</span><span class="s1">).setColor(Color.BLACK)</span><span class="s2">;</span>
        <span class="s2">this</span><span class="s1">.wh22 = (SceneGraph.TransformedObject)(</span><span class="s2">new </span><span class="s1">SceneGraph.TransformedObject(filledPolygon)).setTranslation(-</span><span class="s3">1.0D</span><span class="s2">, </span><span class="s3">1.4D</span><span class="s1">).setScale(</span><span class="s3">0.005D</span><span class="s2">, </span><span class="s3">0.005D</span><span class="s1">).setColor(Color.BLACK)</span><span class="s2">;</span>
        <span class="s1">SceneGraph.CompoundObject Swing2 = </span><span class="s2">new </span><span class="s1">SceneGraph.CompoundObject()</span><span class="s2">;</span>
        <span class="s1">Swing2.add((</span><span class="s2">new </span><span class="s1">SceneGraph.TransformedObject(filledTriangle)).setTranslation(-</span><span class="s3">2.0D</span><span class="s2">, </span><span class="s3">0.5D</span><span class="s1">).setScale(</span><span class="s3">0.5D</span><span class="s2">, </span><span class="s3">1.0D</span><span class="s1">).setColor(Color.MAGENTA))</span><span class="s2">;</span>
        <span class="s1">Swing2.add(</span><span class="s2">this</span><span class="s1">.wh21)</span><span class="s2">;</span>
        <span class="s1">Swing2.add(</span><span class="s2">this</span><span class="s1">.wh22)</span><span class="s2">;</span>
        <span class="s1">Swing2.add((</span><span class="s2">new </span><span class="s1">SceneGraph.TransformedObject(filledRect)).setTranslation(-</span><span class="s3">2.0D</span><span class="s2">, </span><span class="s3">1.5D</span><span class="s1">).setScale(</span><span class="s3">0.125D</span><span class="s2">, </span><span class="s3">2.0D</span><span class="s1">).setRotation(</span><span class="s3">85.0D</span><span class="s1">).setColor(Color.RED))</span><span class="s2">;</span>
        <span class="s2">this</span><span class="s1">.world.add(Swing2)</span><span class="s2">;</span>
        <span class="s2">this</span><span class="s1">.wh31 = (SceneGraph.TransformedObject)(</span><span class="s2">new </span><span class="s1">SceneGraph.TransformedObject(filledPolygon)).setTranslation(</span><span class="s3">1.0D</span><span class="s2">, </span><span class="s3">1.8D</span><span class="s1">).setScale(</span><span class="s3">0.005D</span><span class="s2">, </span><span class="s3">0.005D</span><span class="s1">).setColor(Color.BLACK)</span><span class="s2">;</span>
        <span class="s2">this</span><span class="s1">.wh32 = (SceneGraph.TransformedObject)(</span><span class="s2">new </span><span class="s1">SceneGraph.TransformedObject(filledPolygon)).setTranslation(</span><span class="s3">3.0D</span><span class="s2">, </span><span class="s3">1.6D</span><span class="s1">).setScale(</span><span class="s3">0.005D</span><span class="s2">, </span><span class="s3">0.005D</span><span class="s1">).setColor(Color.BLACK)</span><span class="s2">;</span>
        <span class="s1">SceneGraph.CompoundObject Swing3 = </span><span class="s2">new </span><span class="s1">SceneGraph.CompoundObject()</span><span class="s2">;</span>
        <span class="s1">Swing3.add((</span><span class="s2">new </span><span class="s1">SceneGraph.TransformedObject(filledTriangle)).setTranslation(</span><span class="s3">2.0D</span><span class="s2">, </span><span class="s3">0.7D</span><span class="s1">).setScale(</span><span class="s3">0.5D</span><span class="s2">, </span><span class="s3">1.0D</span><span class="s1">).setColor(Color.GREEN))</span><span class="s2">;</span>
        <span class="s1">Swing3.add(</span><span class="s2">this</span><span class="s1">.wh31)</span><span class="s2">;</span>
        <span class="s1">Swing3.add(</span><span class="s2">this</span><span class="s1">.wh32)</span><span class="s2">;</span>
        <span class="s1">Swing3.add((</span><span class="s2">new </span><span class="s1">SceneGraph.TransformedObject(filledRect)).setTranslation(</span><span class="s3">2.0D</span><span class="s2">, </span><span class="s3">1.7D</span><span class="s1">).setScale(</span><span class="s3">0.125D</span><span class="s2">, </span><span class="s3">2.0D</span><span class="s1">).setRotation(</span><span class="s3">85.0D</span><span class="s1">).setColor(Color.RED))</span><span class="s2">;</span>
        <span class="s2">this</span><span class="s1">.world.add(Swing3)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">public void </span><span class="s1">updateFrame() {</span>
        <span class="s1">++</span><span class="s2">this</span><span class="s1">.frameNumber</span><span class="s2">;</span>
        <span class="s2">this</span><span class="s1">.wh11.setRotation((</span><span class="s2">double</span><span class="s1">)</span><span class="s2">this</span><span class="s1">.frameNumber * </span><span class="s3">0.5D</span><span class="s1">)</span><span class="s2">;</span>
        <span class="s2">this</span><span class="s1">.wh12.setRotation((</span><span class="s2">double</span><span class="s1">)</span><span class="s2">this</span><span class="s1">.frameNumber * </span><span class="s3">0.5D</span><span class="s1">)</span><span class="s2">;</span>
        <span class="s2">this</span><span class="s1">.wh21.setRotation((</span><span class="s2">double</span><span class="s1">)</span><span class="s2">this</span><span class="s1">.frameNumber * </span><span class="s3">0.5D</span><span class="s1">)</span><span class="s2">;</span>
        <span class="s2">this</span><span class="s1">.wh22.setRotation((</span><span class="s2">double</span><span class="s1">)</span><span class="s2">this</span><span class="s1">.frameNumber * </span><span class="s3">0.5D</span><span class="s1">)</span><span class="s2">;</span>
        <span class="s2">this</span><span class="s1">.wh31.setRotation((</span><span class="s2">double</span><span class="s1">)</span><span class="s2">this</span><span class="s1">.frameNumber * </span><span class="s3">0.5D</span><span class="s1">)</span><span class="s2">;</span>
        <span class="s2">this</span><span class="s1">.wh32.setRotation((</span><span class="s2">double</span><span class="s1">)</span><span class="s2">this</span><span class="s1">.frameNumber * </span><span class="s3">0.5D</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">public </span><span class="s1">SceneGraph() {</span>
        <span class="s2">this</span><span class="s1">.display.setPreferredSize(</span><span class="s2">new </span><span class="s1">Dimension(</span><span class="s3">800</span><span class="s2">, </span><span class="s3">600</span><span class="s1">))</span><span class="s2">;</span>
        <span class="s2">this</span><span class="s1">.display.setBackground(BACKGROUND)</span><span class="s2">;</span>
        <span class="s2">final </span><span class="s1">Timer timer = </span><span class="s2">new </span><span class="s1">Timer(</span><span class="s3">17</span><span class="s2">, new </span><span class="s1">ActionListener() {</span>
            <span class="s2">public void </span><span class="s1">actionPerformed(ActionEvent evt) {</span>
                <span class="s1">SceneGraph.</span><span class="s2">this</span><span class="s1">.updateFrame()</span><span class="s2">;</span>
                <span class="s1">SceneGraph.</span><span class="s2">this</span><span class="s1">.repaint()</span><span class="s2">;</span>
            <span class="s1">}</span>
        <span class="s1">})</span><span class="s2">;</span>
        <span class="s2">final </span><span class="s1">JCheckBox animationCheck = </span><span class="s2">new </span><span class="s1">JCheckBox(</span><span class="s4">&quot;Run Animation&quot;</span><span class="s1">)</span><span class="s2">;</span>
        <span class="s1">animationCheck.addActionListener(</span><span class="s2">new </span><span class="s1">ActionListener() {</span>
            <span class="s2">public void </span><span class="s1">actionPerformed(ActionEvent evt) {</span>
                <span class="s2">if </span><span class="s1">(animationCheck.isSelected()) {</span>
                    <span class="s2">if </span><span class="s1">(!timer.isRunning()) {</span>
                        <span class="s1">timer.start()</span><span class="s2">;</span>
                    <span class="s1">}</span>
                <span class="s1">} </span><span class="s2">else if </span><span class="s1">(timer.isRunning()) {</span>
                    <span class="s1">timer.stop()</span><span class="s2">;</span>
                <span class="s1">}</span>

            <span class="s1">}</span>
        <span class="s1">})</span><span class="s2">;</span>
        <span class="s1">JPanel top = </span><span class="s2">new </span><span class="s1">JPanel()</span><span class="s2">;</span>
        <span class="s1">top.add(animationCheck)</span><span class="s2">;</span>
        <span class="s2">this</span><span class="s1">.setLayout(</span><span class="s2">new </span><span class="s1">BorderLayout(</span><span class="s3">5</span><span class="s2">, </span><span class="s3">5</span><span class="s1">))</span><span class="s2">;</span>
        <span class="s2">this</span><span class="s1">.setBackground(Color.DARK_GRAY)</span><span class="s2">;</span>
        <span class="s2">this</span><span class="s1">.setBorder(BorderFactory.createLineBorder(Color.DARK_GRAY</span><span class="s2">, </span><span class="s3">4</span><span class="s1">))</span><span class="s2">;</span>
        <span class="s2">this</span><span class="s1">.add(top</span><span class="s2">, </span><span class="s4">&quot;North&quot;</span><span class="s1">)</span><span class="s2">;</span>
        <span class="s2">this</span><span class="s1">.add(</span><span class="s2">this</span><span class="s1">.display</span><span class="s2">, </span><span class="s4">&quot;Center&quot;</span><span class="s1">)</span><span class="s2">;</span>
        <span class="s2">this</span><span class="s1">.createWorld()</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">private void </span><span class="s1">applyLimits(Graphics2D g2</span><span class="s2">, double </span><span class="s1">xleft</span><span class="s2">, double </span><span class="s1">xright</span><span class="s2">, double </span><span class="s1">ytop</span><span class="s2">, double </span><span class="s1">ybottom</span><span class="s2">, boolean </span><span class="s1">preserveAspect) {</span>
        <span class="s2">int </span><span class="s1">width = </span><span class="s2">this</span><span class="s1">.display.getWidth()</span><span class="s2">;</span>
        <span class="s2">int </span><span class="s1">height = </span><span class="s2">this</span><span class="s1">.display.getHeight()</span><span class="s2">;</span>
        <span class="s2">double </span><span class="s1">displayAspect</span><span class="s2">;</span>
        <span class="s2">double </span><span class="s1">requestedAspect</span><span class="s2">;</span>
        <span class="s2">if </span><span class="s1">(preserveAspect) {</span>
            <span class="s1">displayAspect = Math.abs((</span><span class="s2">double</span><span class="s1">)height / (</span><span class="s2">double</span><span class="s1">)width)</span><span class="s2">;</span>
            <span class="s1">requestedAspect = Math.abs((ybottom - ytop) / (xright - xleft))</span><span class="s2">;</span>
            <span class="s2">double </span><span class="s1">excess</span><span class="s2">;</span>
            <span class="s2">if </span><span class="s1">(displayAspect &gt; requestedAspect) {</span>
                <span class="s1">excess = (ybottom - ytop) * (displayAspect / requestedAspect - </span><span class="s3">1.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">ybottom += excess / </span><span class="s3">2.0D</span><span class="s2">;</span>
                <span class="s1">ytop -= excess / </span><span class="s3">2.0D</span><span class="s2">;</span>
            <span class="s1">} </span><span class="s2">else if </span><span class="s1">(displayAspect &lt; requestedAspect) {</span>
                <span class="s1">excess = (xright - xleft) * (requestedAspect / displayAspect - </span><span class="s3">1.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">xright += excess / </span><span class="s3">2.0D</span><span class="s2">;</span>
                <span class="s1">xleft -= excess / </span><span class="s3">2.0D</span><span class="s2">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>

        <span class="s1">displayAspect = Math.abs((xright - xleft) / (</span><span class="s2">double</span><span class="s1">)width)</span><span class="s2">;</span>
        <span class="s1">requestedAspect = Math.abs((ybottom - ytop) / (</span><span class="s2">double</span><span class="s1">)height)</span><span class="s2">;</span>
        <span class="s2">this</span><span class="s1">.pixelSize = (</span><span class="s2">float</span><span class="s1">)Math.min(displayAspect</span><span class="s2">, </span><span class="s1">requestedAspect)</span><span class="s2">;</span>
        <span class="s1">g2.scale((</span><span class="s2">double</span><span class="s1">)width / (xright - xleft)</span><span class="s2">, </span><span class="s1">(</span><span class="s2">double</span><span class="s1">)height / (ybottom - ytop))</span><span class="s2">;</span>
        <span class="s1">g2.translate(-xleft</span><span class="s2">, </span><span class="s1">-ytop)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">static </span><span class="s1">{</span>
        <span class="s1">BACKGROUND = Color.WHITE</span><span class="s2">;</span>
        <span class="s1">line = </span><span class="s2">new </span><span class="s1">SceneGraph.SceneGraphNode() {</span>
            <span class="s2">void </span><span class="s1">doDraw(Graphics2D g) {</span>
                <span class="s1">g.draw(</span><span class="s2">new </span><span class="s1">Double(-</span><span class="s3">0.5D</span><span class="s2">, </span><span class="s3">0.0D</span><span class="s2">, </span><span class="s3">0.5D</span><span class="s2">, </span><span class="s3">0.0D</span><span class="s1">))</span><span class="s2">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span><span class="s2">;</span>
        <span class="s1">rect = </span><span class="s2">new </span><span class="s1">SceneGraph.SceneGraphNode() {</span>
            <span class="s2">void </span><span class="s1">doDraw(Graphics2D g) {</span>
                <span class="s1">g.draw(</span><span class="s2">new </span><span class="s1">java.awt.geom.Rectangle2D.Double(-</span><span class="s3">0.5D</span><span class="s2">, </span><span class="s1">-</span><span class="s3">0.5D</span><span class="s2">, </span><span class="s3">1.0D</span><span class="s2">, </span><span class="s3">1.0D</span><span class="s1">))</span><span class="s2">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span><span class="s2">;</span>
        <span class="s1">filledRect = </span><span class="s2">new </span><span class="s1">SceneGraph.SceneGraphNode() {</span>
            <span class="s2">void </span><span class="s1">doDraw(Graphics2D g) {</span>
                <span class="s1">g.fill(</span><span class="s2">new </span><span class="s1">java.awt.geom.Rectangle2D.Double(-</span><span class="s3">0.5D</span><span class="s2">, </span><span class="s1">-</span><span class="s3">0.5D</span><span class="s2">, </span><span class="s3">1.0D</span><span class="s2">, </span><span class="s3">1.0D</span><span class="s1">))</span><span class="s2">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span><span class="s2">;</span>
        <span class="s1">circle = </span><span class="s2">new </span><span class="s1">SceneGraph.SceneGraphNode() {</span>
            <span class="s2">void </span><span class="s1">doDraw(Graphics2D g) {</span>
                <span class="s1">g.draw(</span><span class="s2">new </span><span class="s1">java.awt.geom.Ellipse2D.Double(-</span><span class="s3">0.5D</span><span class="s2">, </span><span class="s1">-</span><span class="s3">0.5D</span><span class="s2">, </span><span class="s3">1.0D</span><span class="s2">, </span><span class="s3">1.0D</span><span class="s1">))</span><span class="s2">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span><span class="s2">;</span>
        <span class="s1">filledCircle = </span><span class="s2">new </span><span class="s1">SceneGraph.SceneGraphNode() {</span>
            <span class="s2">void </span><span class="s1">doDraw(Graphics2D g) {</span>
                <span class="s1">g.fill(</span><span class="s2">new </span><span class="s1">java.awt.geom.Ellipse2D.Double(-</span><span class="s3">0.5D</span><span class="s2">, </span><span class="s1">-</span><span class="s3">0.5D</span><span class="s2">, </span><span class="s3">1.0D</span><span class="s2">, </span><span class="s3">1.0D</span><span class="s1">))</span><span class="s2">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span><span class="s2">;</span>
        <span class="s1">filledTriangle = </span><span class="s2">new </span><span class="s1">SceneGraph.SceneGraphNode() {</span>
            <span class="s2">void </span><span class="s1">doDraw(Graphics2D g) {</span>
                <span class="s1">Path2D path = </span><span class="s2">new </span><span class="s1">java.awt.geom.Path2D.Double()</span><span class="s2">;</span>
                <span class="s1">path.moveTo(-</span><span class="s3">0.5D</span><span class="s2">, </span><span class="s3">0.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(</span><span class="s3">0.5D</span><span class="s2">, </span><span class="s3">0.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(</span><span class="s3">0.0D</span><span class="s2">, </span><span class="s3">1.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.closePath()</span><span class="s2">;</span>
                <span class="s1">g.fill(path)</span><span class="s2">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span><span class="s2">;</span>
        <span class="s1">filledPolygon = </span><span class="s2">new </span><span class="s1">SceneGraph.SceneGraphNode() {</span>
            <span class="s2">void </span><span class="s1">doDraw(Graphics2D g2) {</span>
                <span class="s1">Path2D path = </span><span class="s2">new </span><span class="s1">java.awt.geom.Path2D.Double()</span><span class="s2">;</span>
                <span class="s1">path.moveTo(</span><span class="s3">100.0D</span><span class="s2">, </span><span class="s3">0.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(</span><span class="s3">91.0D</span><span class="s2">, </span><span class="s1">-</span><span class="s3">41.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(</span><span class="s3">67.0D</span><span class="s2">, </span><span class="s1">-</span><span class="s3">74.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(</span><span class="s3">31.0D</span><span class="s2">, </span><span class="s1">-</span><span class="s3">95.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(-</span><span class="s3">10.0D</span><span class="s2">, </span><span class="s1">-</span><span class="s3">99.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(-</span><span class="s3">50.0D</span><span class="s2">, </span><span class="s1">-</span><span class="s3">87.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(-</span><span class="s3">81.0D</span><span class="s2">, </span><span class="s1">-</span><span class="s3">59.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(-</span><span class="s3">98.0D</span><span class="s2">, </span><span class="s1">-</span><span class="s3">21.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(-</span><span class="s3">98.0D</span><span class="s2">, </span><span class="s3">21.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(-</span><span class="s3">81.0D</span><span class="s2">, </span><span class="s3">59.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(-</span><span class="s3">50.0D</span><span class="s2">, </span><span class="s3">87.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(-</span><span class="s3">10.0D</span><span class="s2">, </span><span class="s3">99.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(</span><span class="s3">31.0D</span><span class="s2">, </span><span class="s3">95.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(</span><span class="s3">67.0D</span><span class="s2">, </span><span class="s3">74.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(</span><span class="s3">91.0D</span><span class="s2">, </span><span class="s3">41.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.moveTo(</span><span class="s3">0.0D</span><span class="s2">, </span><span class="s3">0.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(</span><span class="s3">91.0D</span><span class="s2">, </span><span class="s1">-</span><span class="s3">41.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.moveTo(</span><span class="s3">0.0D</span><span class="s2">, </span><span class="s3">0.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(</span><span class="s3">67.0D</span><span class="s2">, </span><span class="s1">-</span><span class="s3">74.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.moveTo(</span><span class="s3">0.0D</span><span class="s2">, </span><span class="s3">0.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(</span><span class="s3">31.0D</span><span class="s2">, </span><span class="s1">-</span><span class="s3">95.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.moveTo(</span><span class="s3">0.0D</span><span class="s2">, </span><span class="s3">0.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(-</span><span class="s3">10.0D</span><span class="s2">, </span><span class="s1">-</span><span class="s3">99.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.moveTo(</span><span class="s3">0.0D</span><span class="s2">, </span><span class="s3">0.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(-</span><span class="s3">50.0D</span><span class="s2">, </span><span class="s1">-</span><span class="s3">87.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.moveTo(</span><span class="s3">0.0D</span><span class="s2">, </span><span class="s3">0.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(-</span><span class="s3">81.0D</span><span class="s2">, </span><span class="s1">-</span><span class="s3">59.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.moveTo(</span><span class="s3">0.0D</span><span class="s2">, </span><span class="s3">0.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(-</span><span class="s3">98.0D</span><span class="s2">, </span><span class="s1">-</span><span class="s3">21.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.moveTo(</span><span class="s3">0.0D</span><span class="s2">, </span><span class="s3">0.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(-</span><span class="s3">98.0D</span><span class="s2">, </span><span class="s3">21.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.moveTo(</span><span class="s3">0.0D</span><span class="s2">, </span><span class="s3">0.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(-</span><span class="s3">81.0D</span><span class="s2">, </span><span class="s3">59.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.moveTo(</span><span class="s3">0.0D</span><span class="s2">, </span><span class="s3">0.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(-</span><span class="s3">50.0D</span><span class="s2">, </span><span class="s3">87.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.moveTo(</span><span class="s3">0.0D</span><span class="s2">, </span><span class="s3">0.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(-</span><span class="s3">10.0D</span><span class="s2">, </span><span class="s3">99.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.moveTo(</span><span class="s3">0.0D</span><span class="s2">, </span><span class="s3">0.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(</span><span class="s3">31.0D</span><span class="s2">, </span><span class="s3">95.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.moveTo(</span><span class="s3">0.0D</span><span class="s2">, </span><span class="s3">0.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(</span><span class="s3">67.0D</span><span class="s2">, </span><span class="s3">74.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.moveTo(</span><span class="s3">0.0D</span><span class="s2">, </span><span class="s3">0.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(</span><span class="s3">91.0D</span><span class="s2">, </span><span class="s3">41.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.moveTo(</span><span class="s3">0.0D</span><span class="s2">, </span><span class="s3">0.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.lineTo(</span><span class="s3">100.0D</span><span class="s2">, </span><span class="s3">0.0D</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">path.closePath()</span><span class="s2">;</span>
                <span class="s1">g2.fill(path)</span><span class="s2">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">private static class </span><span class="s1">TransformedObject </span><span class="s2">extends </span><span class="s1">SceneGraph.SceneGraphNode {</span>
        <span class="s1">SceneGraph.SceneGraphNode object</span><span class="s2">;</span>
        <span class="s2">double </span><span class="s1">rotationInDegrees = </span><span class="s3">0.0D</span><span class="s2">;</span>
        <span class="s2">double </span><span class="s1">scaleX = </span><span class="s3">1.0D</span><span class="s2">;</span>
        <span class="s2">double </span><span class="s1">scaleY = </span><span class="s3">1.0D</span><span class="s2">;</span>
        <span class="s2">double </span><span class="s1">translateX = </span><span class="s3">0.0D</span><span class="s2">;</span>
        <span class="s2">double </span><span class="s1">translateY = </span><span class="s3">0.0D</span><span class="s2">;</span>

        <span class="s1">TransformedObject(SceneGraph.SceneGraphNode object) {</span>
            <span class="s2">super</span><span class="s1">(</span><span class="s2">null</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s2">this</span><span class="s1">.object = object</span><span class="s2">;</span>
        <span class="s1">}</span>

        <span class="s1">SceneGraph.TransformedObject setRotation(</span><span class="s2">double </span><span class="s1">degrees) {</span>
            <span class="s2">this</span><span class="s1">.rotationInDegrees = degrees</span><span class="s2">;</span>
            <span class="s2">return this;</span>
        <span class="s1">}</span>

        <span class="s1">SceneGraph.TransformedObject setTranslation(</span><span class="s2">double </span><span class="s1">dx</span><span class="s2">, double </span><span class="s1">dy) {</span>
            <span class="s2">this</span><span class="s1">.translateX = dx</span><span class="s2">;</span>
            <span class="s2">this</span><span class="s1">.translateY = dy</span><span class="s2">;</span>
            <span class="s2">return this;</span>
        <span class="s1">}</span>

        <span class="s1">SceneGraph.TransformedObject setScale(</span><span class="s2">double </span><span class="s1">sx</span><span class="s2">, double </span><span class="s1">sy) {</span>
            <span class="s2">this</span><span class="s1">.scaleX = sx</span><span class="s2">;</span>
            <span class="s2">this</span><span class="s1">.scaleY = sy</span><span class="s2">;</span>
            <span class="s2">return this;</span>
        <span class="s1">}</span>

        <span class="s2">void </span><span class="s1">doDraw(Graphics2D g) {</span>
            <span class="s1">AffineTransform savedTransform = g.getTransform()</span><span class="s2">;</span>
            <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.translateX != </span><span class="s3">0.0D </span><span class="s1">|| </span><span class="s2">this</span><span class="s1">.translateY != </span><span class="s3">0.0D</span><span class="s1">) {</span>
                <span class="s1">g.translate(</span><span class="s2">this</span><span class="s1">.translateX</span><span class="s2">, this</span><span class="s1">.translateY)</span><span class="s2">;</span>
            <span class="s1">}</span>

            <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.rotationInDegrees != </span><span class="s3">0.0D</span><span class="s1">) {</span>
                <span class="s1">g.rotate(</span><span class="s2">this</span><span class="s1">.rotationInDegrees / </span><span class="s3">180.0D </span><span class="s1">* </span><span class="s3">3.141592653589793D</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s1">}</span>

            <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.scaleX != </span><span class="s3">1.0D </span><span class="s1">|| </span><span class="s2">this</span><span class="s1">.scaleY != </span><span class="s3">1.0D</span><span class="s1">) {</span>
                <span class="s1">g.scale(</span><span class="s2">this</span><span class="s1">.scaleX</span><span class="s2">, this</span><span class="s1">.scaleY)</span><span class="s2">;</span>
            <span class="s1">}</span>

            <span class="s2">this</span><span class="s1">.object.draw(g)</span><span class="s2">;</span>
            <span class="s1">g.setTransform(savedTransform)</span><span class="s2">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s2">private static class </span><span class="s1">CompoundObject </span><span class="s2">extends </span><span class="s1">SceneGraph.SceneGraphNode {</span>
        <span class="s1">ArrayList&lt;SceneGraph.SceneGraphNode&gt; subobjects</span><span class="s2">;</span>

        <span class="s2">private </span><span class="s1">CompoundObject() {</span>
            <span class="s2">super</span><span class="s1">(</span><span class="s2">null</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s2">this</span><span class="s1">.subobjects = </span><span class="s2">new </span><span class="s1">ArrayList()</span><span class="s2">;</span>
        <span class="s1">}</span>

        <span class="s1">SceneGraph.CompoundObject add(SceneGraph.SceneGraphNode node) {</span>
            <span class="s2">this</span><span class="s1">.subobjects.add(node)</span><span class="s2">;</span>
            <span class="s2">return this;</span>
        <span class="s1">}</span>

        <span class="s2">void </span><span class="s1">doDraw(Graphics2D g) {</span>
            <span class="s1">Iterator var2 = </span><span class="s2">this</span><span class="s1">.subobjects.iterator()</span><span class="s2">;</span>

            <span class="s2">while</span><span class="s1">(var2.hasNext()) {</span>
                <span class="s1">SceneGraph.SceneGraphNode node = (SceneGraph.SceneGraphNode)var2.next()</span><span class="s2">;</span>
                <span class="s1">node.draw(g)</span><span class="s2">;</span>
            <span class="s1">}</span>

        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s2">private abstract static class </span><span class="s1">SceneGraphNode {</span>
        <span class="s1">Color color</span><span class="s2">;</span>

        <span class="s2">private </span><span class="s1">SceneGraphNode() {</span>
        <span class="s1">}</span>

        <span class="s1">SceneGraph.SceneGraphNode setColor(Color c) {</span>
            <span class="s2">this</span><span class="s1">.color = c</span><span class="s2">;</span>
            <span class="s2">return this;</span>
        <span class="s1">}</span>

        <span class="s2">final void </span><span class="s1">draw(Graphics2D g) {</span>
            <span class="s1">Color saveColor = </span><span class="s2">null;</span>
            <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.color != </span><span class="s2">null</span><span class="s1">) {</span>
                <span class="s1">saveColor = g.getColor()</span><span class="s2">;</span>
                <span class="s1">g.setColor(</span><span class="s2">this</span><span class="s1">.color)</span><span class="s2">;</span>
            <span class="s1">}</span>

            <span class="s2">this</span><span class="s1">.doDraw(g)</span><span class="s2">;</span>
            <span class="s2">if </span><span class="s1">(saveColor != </span><span class="s2">null</span><span class="s1">) {</span>
                <span class="s1">g.setColor(saveColor)</span><span class="s2">;</span>
            <span class="s1">}</span>

        <span class="s1">}</span>

        <span class="s2">abstract void </span><span class="s1">doDraw(Graphics2D var1)</span><span class="s2">;</span>
    <span class="s1">}</span>
<span class="s1">}</span>
</pre>
</body>
</html>